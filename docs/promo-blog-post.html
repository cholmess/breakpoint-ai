<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How We Gate LLM Changes in CI</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=JetBrains+Mono:wght@400&display=swap');

    * { box-sizing: border-box; }
    body {
      max-width: 680px;
      margin: 0 auto;
      padding: 2rem 1.5rem 4rem;
      font-family: 'Source Serif 4', Georgia, serif;
      font-size: 18px;
      line-height: 1.7;
      color: #1a1a1a;
      background: #fff;
    }

    h1 { font-size: 2rem; font-weight: 700; margin: 0 0 1.5rem; line-height: 1.2; }
    h2 { font-size: 1.35rem; font-weight: 600; margin: 2.5rem 0 1rem; }
    p { margin: 0 0 1rem; }
    ul { margin: 0 0 1rem; padding-left: 1.5rem; }
    li { margin-bottom: 0.35rem; }

    pre, code {
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 0.9em;
    }
    pre {
      background: #f5f5f5;
      border: 1px solid #e5e5e5;
      border-radius: 6px;
      padding: 1rem 1.25rem;
      overflow-x: auto;
      margin: 1rem 0;
      white-space: pre-wrap;
      word-break: break-word;
    }
    code { background: #f0f0f0; padding: 0.15em 0.4em; border-radius: 4px; }
    pre code { background: none; padding: 0; }

    strong { font-weight: 600; }
    a { color: #0066cc; text-decoration: none; }
    a:hover { text-decoration: underline; }

    hr { border: none; border-top: 1px solid #ddd; margin: 2.5rem 0; }

    .meta { font-size: 0.9rem; color: #666; margin-bottom: 2rem; }

    @media print {
      body { padding: 1rem; font-size: 11pt; }
      h1 { font-size: 1.6rem; }
      h2 { font-size: 1.2rem; margin-top: 1.5rem; }
      pre { background: #f8f8f8; border-color: #ddd; font-size: 0.8em; }
      a { color: #000; }
    }
  </style>
</head>
<body>
  <article>
    <h1>How We Gate LLM Changes in CI</h1>
    <p class="meta">BreakPoint – Local-first AI output evaluation</p>

    <p>You change an LLM model. Or tweak a prompt. The output looks fine. Then you ship it—and cost jumps 38%, a phone number slips into the response, or the JSON breaks your downstream parser. No unit test caught it. Manual review didn't scale. You're left firefighting in production.</p>
    <p>This is the gap BreakPoint fills.</p>

    <h2>The Problem</h2>
    <p>Unit tests assume deterministic behavior. LLM output is not. When you swap models or adjust prompts, subtle regressions slip through: cost spikes, PII leaks, format drift. Traditional CI doesn't know how to gate "is this candidate output acceptable compared to the baseline?"</p>
    <p>You need a deterministic decision: compare the candidate output to a known-good baseline, evaluate cost, PII, and semantic drift, and block risky changes before merge.</p>

    <h2>Introducing BreakPoint</h2>
    <p>BreakPoint is a local-first decision engine that compares baseline vs. candidate LLM output and returns one of three outcomes: <strong>ALLOW</strong>, <strong>WARN</strong>, or <strong>BLOCK</strong>. It runs entirely locally—no SaaS, no API keys. Policy evaluation is deterministic from your saved artifacts.</p>
    <p><strong>Lite mode</strong> (default) is zero-config. Out of the box it checks:</p>
    <ul>
      <li><strong>Cost:</strong> WARN at +20%, BLOCK at +40%</li>
      <li><strong>PII:</strong> BLOCK on first detection (email, phone, credit card, SSN)</li>
      <li><strong>Drift:</strong> WARN at +35%, BLOCK at +70% (semantic similarity)</li>
      <li><strong>Empty output:</strong> Always BLOCK</li>
    </ul>
    <p>Stable exit codes make it CI-friendly: <code>0</code> = ALLOW, <code>1</code> = WARN, <code>2</code> = BLOCK.</p>

    <h2>Quick Example</h2>
    <pre><code>pip install breakpoint-ai
breakpoint evaluate baseline.json candidate.json</code></pre>
    <p>Example output:</p>
    <pre><code>STATUS: BLOCK

Reasons:
- Cost increased by 38% (baseline: 1,000 tokens -> candidate: 1,380)
- Detected US phone number pattern</code></pre>
    <p>That's it. One command, one clear decision.</p>

    <h2>CI Integration</h2>
    <p>Add BreakPoint to your PR workflow with the GitHub Action:</p>
    <pre><code>name: BreakPoint Gate

on:
  pull_request:
    branches: [main]

jobs:
  evaluate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Generate candidate
        run: # ... produce candidate.json from your model

      - name: BreakPoint Evaluate
        uses: cholmess/breakpoint-ai@v1
        with:
          baseline: baseline.json
          candidate: candidate.json
          fail_on: warn</code></pre>
    <p>With <code>fail_on: warn</code>, any WARN or BLOCK fails the workflow. Your PR is blocked until you fix the regression or explicitly adjust the baseline.</p>

    <h2>Real-World Scenarios</h2>
    <p>BreakPoint catches cases that slip through the cracks:</p>
    <ol>
      <li><strong>Cost regression after model swap</strong> — Output looks equivalent, but token count spikes. Policy blocks before deploy.</li>
      <li><strong>Structured output format regression</strong> — The candidate drops expected JSON structure or drifts too far from baseline behavior. Blocked.</li>
      <li><strong>PII in candidate output</strong> — Email, phone, or credit card appears. Immediate BLOCK.</li>
      <li><strong>Small prompt change → big cost blowup</strong> — A tweak plus a model upgrade creates large cost and latency increases with output-contract drift. Caught before merge.</li>
    </ol>

    <h2>Ship with Confidence</h2>
    <p>BreakPoint is open source, MIT licensed, and runs locally. No telemetry. No cloud dependency. Your baselines stay in your repo. The decision is deterministic and auditable.</p>
    <p>Try it in 60 seconds:</p>
    <pre><code>pip install breakpoint-ai
make demo</code></pre>
    <p>Or explore the examples in the <a href="https://github.com/cholmess/breakpoint-ai">repo</a>.</p>

    <hr>
    <p><strong>Links</strong></p>
    <ul>
      <li><a href="https://github.com/cholmess/breakpoint-ai">GitHub</a></li>
      <li><a href="https://pypi.org/project/breakpoint-ai/">PyPI</a></li>
      <li><a href="https://github.com/marketplace/actions/breakpoint-evaluate">GitHub Action</a></li>
    </ul>
  </article>
</body>
</html>
